version: '2'
services:
    mongo_db:
        image: mongo
        container_name: mongo_db
        hostname: mongo_db
        # set max cache memory to 0.1 GB
        command: ["--wiredTigerCacheSizeGB", "0.1"]
        # restart: always
        # for documentation only:
        expose:
            - "27017"
        # TODO: remove port - for testing only
        ports:
            - "27017:27017"
        # TODO: move environment to file
        environment:
            MONGO_INITDB_ROOT_USERNAME: root
            MONGO_INITDB_ROOT_PASSWORD: 1234
        volumes:
            - mongo-data:/data/db
            # used for cluster/replica/sharding just defining here so multiple
            # volumes are not created.
            - mongo-configdb:/data/configdb
        networks:
            - proj_net
        mem_limit: 200m
        # restart: unless-stopped
    # grafana:
    #     container_name: grafana
    #     hostname: grafana
    #     image: grafana/grafana
    #     ports:
    #         - "3000:3000"
    #     networks:
    #         - proj_net
    #     volumes:
    #         - grafana_data:/var/lib/grafana
    #     env_file:
    #         - ./grafana/.env
    #     # restart: unless-stopped
networks:
    stf_net:
volumes:
   # grafana_data:
    mongo-data:
    mongo-configdb:
networks:
    proj_net:
